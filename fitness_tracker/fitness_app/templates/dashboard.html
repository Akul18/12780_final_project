{% load static %}
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Fitness Dashboard</title>

  <!-- Chart.js (external library) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Your app JS (served by Django staticfiles) -->
  <script src="{% static '/dashboard.js' %}" defer></script>
</head>
<body>
  <h1>Fitness Dashboard</h1>

  {% if error %}
    <p style="color: red;"><strong>{{ error }}</strong></p>
  {% endif %}
  {% if success %}
    <p style="color: green;"><strong>{{ success }}</strong></p>
  {% endif %}

  <p>
    <a href="/export.xlsx">Export All (XLSX)</a>
  </p>

  <hr>

  <h2>Add Exercise</h2>
  <form method="post" action="/exercise/add/">
    {% csrf_token %}
    <input name="name" placeholder="Exercise name (e.g. Bench Press)" required>
    <input name="muscle_group" placeholder="Muscle group (e.g. Chest)" required>
    <button type="submit">Add</button>
  </form>

  <hr>

  <h2>Log Session</h2>
  <form method="post" action="/log/">
    {% csrf_token %}

    <label>Exercise:</label>
    <select name="exercise" required>
      <option value="">-- select --</option>
      {% for ex in exercises %}
        <option value="{{ ex.id }}">{{ ex.name }} ({{ ex.muscle_group }})</option>
      {% endfor %}
    </select>

    <label>Date:</label>
    <input type="date" name="performed_at" required>

    <label>Weight:</label>
    <input type="number" step="0.1" name="weight" placeholder="e.g. 135">

    <label>Reps:</label>
    <input type="number" name="reps" placeholder="e.g. 8">

    <button type="submit">Save</button>
  </form>

  <hr>

  <h2>Progress</h2>

  <label for="exercise-select">Chart exercise:</label>
  <select id="exercise-select">
    <option value="">All exercises</option>
    {% for ex in exercises %}
      <option value="{{ ex.id }}">{{ ex.name }} ({{ ex.muscle_group }})</option>
    {% endfor %}
  </select>

  <label for="metric-select">Metric:</label>
  <select id="metric-select">
    <option value="weight" selected>Weight</option>
    <option value="reps">Reps</option>
  </select>

  <button id="export-selected" type="button">Export Selected (XLSX)</button>

  <div style="max-width: 900px; margin-top: 16px;">
    <canvas id="chart"></canvas>
  </div>
</body>
</html>
